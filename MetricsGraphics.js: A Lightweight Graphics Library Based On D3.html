<!doctype html><div style="max-width: 700px;font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif;padding: 50px;line-height: 1.25;background: #f9f9f9;"><meta charset="UTF8"/><title>MetricsGraphics.js: A Lightweight Graphics Library Based On D3</title><h1>MetricsGraphics.js: A Lightweight Graphics Library Based On D3</h1><p><a href="https://hacks.mozilla.org/2014/12/metricsgraphics-js-a-lightweight-graphics-library-based-on-d3/?">Original Article</a> &middot; <a href="#articleList">Articles in this issue</a> </p><div><article class="post">
    <p><i>MetricsGraphics.js</i> is a library built on top of <a href="http://d3js.org/">D3</a> that is optimized for visualizing and laying out time-series data. It provides a simple way to produce common types of graphics in a principled&#xA0;and&#xA0;consistent way. The library supports line charts, scatterplots, histograms, barplots and data tables, as well as features like rug plots and basic linear regression.</p>
<p>The library elevates the layout and explanation of these graphics to the same level of priority as the graphics. The emergent philosophy is one of efficiency and practicality.</p>
<p><a href="https://github.com/hamilton/">Hamilton Ulmer</a> and I&#xA0;began building the library earlier this year, during which time we found ourselves copy-and-pasting bits of code in various projects. This led to errors and inconsistent features, and so we decided to develop a single library that provides common functionality and aesthetics to all of our internal projects.</p>
<p>Moreover, at the time, we were having limited success with our attempts to get casual programmers and non-programmers within the organization to use a library like D3 to create dashboards. The&#xA0;learning curve was proving a bit of an obstacle. So it seemed reasonable&#xA0;to&#xA0;create a level of indirection using well-established&#xA0;design patterns to try and&#xA0;bridge that&#xA0;chasm.</p>
<p>Our&#xA0;API is simple. All that&#x2019;s needed to create a graphic is to specify a few default parameters and then, if desired, override one or more of the <a href="https://github.com/mozilla/metrics-graphics/wiki/List-of-Options">optional parameters on offer</a>. We don&#x2019;t maintain state. To update a graphic, one would call <i>data_graphic</i> on the same target element.</p>
<p>The library is also data-source agnostic. While it provides a number of convenience functions and options that allow for graphics to better handle things like missing observations, it doesn&#x2019;t care where the data comes from.</p>
<h2>A quick tutorial</h2>
<p>Here&#x2019;s a quick tutorial to get you started. Say that we have some data on a scholarly topic like <a href="http://geocommons.com/overlays/134594">UFO sightings</a>. We decide that we&#x2019;re interested in creating a line chart of yearly sightings.</p>
<p>We create a JSON file called <a href="http://metricsgraphicsjs.org/data/ufo-sightings.json">data/ufo-sightings.json</a> based on the original dataset, where we aggregate yearly sightings. The data doesn&#x2019;t have to be JSON of course, but that will mean less work later on.</p>
<p>The next thing we do is load the data:</p>
<pre class="highbottom"><code class="javascript hljs">d3.json(<span class="hljs-string">'data/ufo-sightings.json'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(data)</span> </span>{
})</code></pre>
<p><i>data_graphic</i> expects the data object to be an array of objects, which is already the case for us. That&#x2019;s good. It also needs dates to be timestamps if they&#x2019;re in a format like <i>yyyy-mm-dd</i>. We&#x2019;ve got aggregated yearly data, so we don&#x2019;t need to worry about that. So now, all we need to do is&#xA0;create the graphic and place it in the element specified in <i>target</i>.</p>
<pre class="highbottom"><code class="javascript hljs">d3.json(<span class="hljs-string">'data/ufo-sightings.json'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(data)</span> </span>{
    data_graphic({
        title: <span class="hljs-string">"UFO Sightings"</span>,
        description: <span class="hljs-string">"Yearly UFO sightings (1945 to 2010)."</span>,
        data: data,
        width: <span class="hljs-number">650</span>,
        height: <span class="hljs-number">150</span>,
        target: <span class="hljs-string">'#ufo-sightings'</span>,
        x_accessor: <span class="hljs-string">'year'</span>,
        y_accessor: <span class="hljs-string">'sightings'</span>,
        markers: [{<span class="hljs-string">'year'</span>: <span class="hljs-number">1964</span>, 
<span class="hljs-string">                   'label'</span>: <span class="hljs-string">'"The Creeping Terror" released'
</span>        }]
    })
})</code></pre>
<p class="highbottom">And this is what we end up with. In this example, we&#x2019;re adding a marker to draw attention to a particular data point. This is optional of course.</p>
<p class="highbottom"><img class="aligncenter" src="http://metricsgraphicsjs.org/images/metricsgraphics.png" alt="A line chart in MetricsGraphics.js" width="1318"></p>
<h2>A few final&#xA0;remarks</h2>
<p>We follow a real-needs approach to development. Right now, we have mostly implemented features that have been important to us. Having said that, our work is available on <a href="https://github.com/mozilla/metrics-graphics">Github</a>, as are many of our discussions, and we take any and all pull requests and issues seriously.</p>
<p>There is still a lot of work to be done.&#xA0;We invite you to take the library out for a spin and file bugs! We&#x2019;ve set up a sandbox that you can use to try things out without having to download anything: <a href="http://metricsgraphicsjs.org">http://metricsgraphicsjs.org</a></p>
<p>MetricsGraphics.js v1.1 is scheduled for release on December 1, 2014.</p>    
  </article>

    
    
    





  </div><hr/><section id="articleList" style="font-size: 14px;"><b>Articles in This Issue</b><ul><li><a href="./The State of JavaScript in 2015.html">The State of JavaScript in 2015</a></li><li><a href="./io.js: A Node and npm-compatible JavaScript Platform.html">io.js: A Node and npm-compatible JavaScript Platform</a></li><li><a href="./The DailyJS JavaScript Developer Survey 2014.html">The DailyJS JavaScript Developer Survey 2014</a></li><li><a href="./SVG In-Depth Online-In-Person Workshop.html">SVG In-Depth Online/In-Person Workshop</a></li><li><a href="./<img src="http:--s3.amazonaws.com-nlga-uploads-item-image-30504-i.png" style="border: 0px solid #bbbbbb" width="120" height="120" alt="Frontend Masters">.html"><img src="http://s3.amazonaws.com/nlga/uploads/item/image/30504/i.png" style="border: 0px solid #bbbbbb" width="120" height="120" alt="Frontend Masters"></a></li><li><a href="./Getting Started with JavaScript for Automation on OS X Yosemite.html">Getting Started with JavaScript for Automation on OS X Yosemite</a></li><li><a href="./Preparing for The Future of AngularJS.html">Preparing for The Future of AngularJS</a></li><li><a href="./Relieving Backbone Pain with Flux and React (video).html">Relieving Backbone Pain with Flux and React (video)</a></li><li><a href="./JavaScript developers - spend 60 seconds applying to 50 NYC jobs at once.html">JavaScript developers - spend 60 seconds applying to 50 NYC jobs at once</a></li><li><a href="./underdog.io..html">underdog.io.</a></li><li><a href="./Javascript Devs in High Demand! (SF, LA, NYC, ORD, BOS, LON).html">Javascript Devs in High Demand! (SF, LA, NYC, ORD, BOS, LON)</a></li><li><a href="./JS Remote Conf: An Online JavaScript Conference in February 2015.html">JS Remote Conf: An Online JavaScript Conference in February 2015</a></li><li><a href="./An Update on the Node.js Advisory Board.html">An Update on the Node.js Advisory Board</a></li><li><a href="./Demystifying JavaScript Variable Scope and Hoisting.html">Demystifying JavaScript Variable Scope and Hoisting</a></li><li><a href="./JavaScript Modules the ES6 Way.html">JavaScript Modules the ES6 Way</a></li><li><a href="./Top 10 Mistakes Node.js Developers Make.html">Top 10 Mistakes Node.js Developers Make</a></li><li><a href="./Level Up in Backbone.js, A Powerful JavaScript MVC Framework.html">Level Up in Backbone.js, A Powerful JavaScript MVC Framework</a></li><li><a href="./Creating Nice Alerts with sweetAlert.html">Creating Nice Alerts with sweetAlert</a></li><li><a href="./Use ngStorage For All Your AngularJS Local Storage Needs.html">Use ngStorage For All Your AngularJS Local Storage Needs</a></li><li><a href="./Calling an Array of Functions in JavaScript.html">Calling an Array of Functions in JavaScript</a></li><li><a href="./The Anatomy of A Simple Templating Engine.html">The Anatomy of A Simple Templating Engine</a></li><li><a href="./The Case For Marionette.js (a Backbone framework).html">The Case For Marionette.js (a Backbone framework)</a></li><li><a href="./PhotoSwipe: A Photo Gallery, with No Dependencies.html">PhotoSwipe: A Photo Gallery, with No Dependencies</a></li><li><a href="./MagicEye.js: JS Lib (+ demo) for Generating 3D Magic Eye Images.html">MagicEye.js: JS Lib (+ demo) for Generating 3D Magic Eye Images</a></li><li><a href="./Preceptor: Test Runner and Aggregator.html">Preceptor: Test Runner and Aggregator</a></li><li><a href="./React Tween State: The Equivalent of React's this.setState, but for Animated Tweening.html">React Tween State: The Equivalent of React's this.setState, but for Animated Tweening</a></li><li><a href="./Duktape: An Embeddable JavaScript Engine (ES 5.1 Compliant) Written in C.html">Duktape: An Embeddable JavaScript Engine (ES 5.1 Compliant) Written in C</a></li><li><a href="./MetricsGraphics.js: A Lightweight Graphics Library Based On D3.html">MetricsGraphics.js: A Lightweight Graphics Library Based On D3</a></li><li><a href="./Tweene: JavaScript Animation Proxy (Wraps-Abstracts Other Libs).html">Tweene: JavaScript Animation Proxy (Wraps/Abstracts Other Libs)</a></li><li><a href="./MustBe: Authorization Plumbing For Node.js - Express Apps.html">MustBe: Authorization Plumbing For Node.js / Express Apps</a></li></ul></section></div>