<!doctype html><div style="max-width: 700px;font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif;padding: 50px;line-height: 1.25;background: #f9f9f9;"><meta charset="UTF8"/><title>Tracking Pageviews with Google Analytics and Angular</title><h1>Tracking Pageviews with Google Analytics and Angular</h1><p><a href="http://blog.nraboy.com/2014/11/tracking-pageviews-google-analytics-angular-js/?">Original Article</a> &middot; <a href="#articleList">Articles in this issue</a> </p><div><div class="entry-content">
			<p>Recently I noticed in my Google analytics dashboard that Analytics wasn&#x2019;t tracking the full url of the page of my Angular JS site. I was tracking individual pageviews using this code in my app.js file:</p>


		<div id="crayon-54753f31acf18053992001" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate">
		
			
			
			
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums ">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54753f31acf18053992001-1"><span class="crayon-v">MyApp</span><span class="crayon-sy">.</span><span class="crayon-e">run</span><span class="crayon-sy">(</span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-sy">$</span><span class="crayon-v">rootScope</span><span class="crayon-sy">,</span><span class="crayon-sy">$</span><span class="crayon-v">location</span><span class="crayon-sy">,</span><span class="crayon-sy">$</span><span class="crayon-v">window</span><span class="crayon-sy">)</span><span class="crayon-sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54753f31acf18053992001-2"><span class="crayon-sy">$</span><span class="crayon-v">rootScope</span><span class="crayon-sy">.</span><span class="crayon-sy">$</span><span class="crayon-e">on</span><span class="crayon-sy">(</span><span class="crayon-s">'$routeChangeSuccess'</span><span class="crayon-sy">,</span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-54753f31acf18053992001-3"><span class="crayon-sy">$</span><span class="crayon-v">window</span><span class="crayon-sy">.</span><span class="crayon-v">_gaq</span><span class="crayon-sy">.</span><span class="crayon-e">push</span><span class="crayon-sy">(</span><span class="crayon-sy">[</span><span class="crayon-s">'_trackPageview'</span><span class="crayon-sy">,</span><span class="crayon-sy">$</span><span class="crayon-v">location</span><span class="crayon-sy">.</span><span class="crayon-e">path</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>



<p>I was receiving pageview counts just fine, but it was leaving off URL parameters. I was getting:</p>


		


<p>Which is ok, but instead I would like to see:</p>


		<div id="crayon-54753f31acf57305419204" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate">
		
			
			
			
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums ">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54753f31acf57305419204-1"><span class="crayon-o">/</span><span class="crayon-v">search</span><span class="crayon-o">-</span><span class="crayon-v">results</span><span class="crayon-sy">?</span><span class="crayon-v">searchTerm</span><span class="crayon-o">=</span><span class="crayon-v">term</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


<p>Needless to say this was an ideal situation, I didn&#x2019;t know what users were searching for. Turns out, Angular&#x2019;s $location.path() function does not return URL parameters. Luckily I found $routeParams.</p>
<p><a href="https://docs.angularjs.org/api/ngRoute/service/%24routeParams" title="Documentation" target="_blank">$routeParams</a>, part of ngRoute, is basically a keystore of URL parameters. A quick console.log($routeParams) &#xA0;in the console shows:</p>


		<div id="crayon-54753f31acf6d146160084" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate">
		
			
			
			
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums ">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54753f31acf6d146160084-1"><span class="crayon-t">Object</span><span class="crayon-sy">{</span><span class="crayon-v">searchTerm</span><span class="crayon-o">:</span><span class="crayon-s">"search"</span><span class="crayon-sy">}</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


<p>Using Angular&#x2019;s awesome dependency injection, the ending product is easy. Inject $routeParams, build a query string, attach to $location.path(), and push to _gaq:</p>


		<div id="crayon-54753f31acf81052332714" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate">
		
			
			
			
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums ">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54753f31acf81052332714-1"><span class="crayon-v">MyApp</span><span class="crayon-sy">.</span><span class="crayon-e">run</span><span class="crayon-sy">(</span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-sy">$</span><span class="crayon-v">rootScope</span><span class="crayon-sy">,</span><span class="crayon-sy">$</span><span class="crayon-v">location</span><span class="crayon-sy">,</span><span class="crayon-sy">$</span><span class="crayon-v">routeParams</span><span class="crayon-sy">,</span><span class="crayon-sy">$</span><span class="crayon-v">window</span><span class="crayon-sy">)</span><span class="crayon-sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-54753f31acf81052332714-2"><span class="crayon-sy">$</span><span class="crayon-v">rootScope</span><span class="crayon-sy">.</span><span class="crayon-sy">$</span><span class="crayon-e">on</span><span class="crayon-sy">(</span><span class="crayon-s">'$routeChangeSuccess'</span><span class="crayon-sy">,</span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-54753f31acf81052332714-3"><span class="crayon-t">var</span><span class="crayon-v">output</span><span class="crayon-o">=</span><span class="crayon-sy">$</span><span class="crayon-v">location</span><span class="crayon-sy">.</span><span class="crayon-e">path</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">+</span><span class="crayon-s">"?"</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54753f31acf81052332714-4"><span class="crayon-v">angular</span><span class="crayon-sy">.</span><span class="crayon-st">forEach</span><span class="crayon-sy">(</span><span class="crayon-sy">$</span><span class="crayon-v">routeParams</span><span class="crayon-sy">,</span><span class="crayon-t">function</span><span class="crayon-sy">(</span><span class="crayon-v">value</span><span class="crayon-sy">,</span><span class="crayon-v">key</span><span class="crayon-sy">)</span><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-54753f31acf81052332714-5"><span class="crayon-v">output</span><span class="crayon-o">+=</span><span class="crayon-v">key</span><span class="crayon-o">+</span><span class="crayon-s">"="</span><span class="crayon-o">+</span><span class="crayon-v">value</span><span class="crayon-o">+</span><span class="crayon-s">"&amp;"</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-54753f31acf81052332714-7"><span class="crayon-v">output</span><span class="crayon-o">=</span><span class="crayon-v">output</span><span class="crayon-sy">.</span><span class="crayon-e">substr</span><span class="crayon-sy">(</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-v">output</span><span class="crayon-sy">.</span><span class="crayon-v">length</span><span class="crayon-o">-</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-54753f31acf81052332714-8"><span class="crayon-sy">$</span><span class="crayon-v">window</span><span class="crayon-sy">.</span><span class="crayon-v">_gaq</span><span class="crayon-sy">.</span><span class="crayon-e">push</span><span class="crayon-sy">(</span><span class="crayon-sy">[</span><span class="crayon-s">'_trackPageView'</span><span class="crayon-sy">,</span><span class="crayon-v">output</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-54753f31acf81052332714-9"><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


<p>The ending result gives me this entry in Google Analytics:</p>


		<div id="crayon-54753f31acf96669425469" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate">
		
			
			
			
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums ">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-54753f31acf96669425469-1"><span class="crayon-o">/</span><span class="crayon-v">search</span><span class="crayon-o">-</span><span class="crayon-v">results</span><span class="crayon-sy">?</span><span class="crayon-v">searchTerm</span><span class="crayon-o">=</span><span class="crayon-v">search</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>



					</div>

		
	</div><hr/><section id="articleList" style="font-size: 14px;"><b>Articles in This Issue</b><ul><li><a href="./Understanding ECMAScript 6.html">Understanding ECMAScript 6</a></li><li><a href="./Getting Started with React and JSX.html">Getting Started with React and JSX</a></li><li><a href="./Regulex：A JavaScript Regular Expression Visualizer.html">Regulex：A JavaScript Regular Expression Visualizer</a></li><li><a href="./What's in a Function Name?.html">What's in a Function Name?</a></li><li><a href="./The Difference Between Java and JavaScript (in comic book form).html">The Difference Between Java and JavaScript (in comic book form)</a></li><li><a href="./PowerArray: The JavaScript Array with Boosted Performance.html">PowerArray: The JavaScript Array with Boosted Performance</a></li><li><a href="./Frontend Javascript-Angular developer at Contentful (Berlin, Germany).html">Frontend Javascript/Angular developer at Contentful (Berlin, Germany)</a></li><li><a href="./JavaScript Devs in High Demand (SF, LA, NY, ORD, BOS).html">JavaScript Devs in High Demand (SF, LA, NY, ORD, BOS)</a></li><li><a href="./Yahoo Mail Moving to Node and React + Flux (slide-deck).html">Yahoo Mail Moving to Node and React + Flux (slide-deck)</a></li><li><a href="./ShirtJS: JavaScript Framework Themed Clothing.html">ShirtJS: JavaScript Framework Themed Clothing</a></li><li><a href="./This Dashcam Simulation Is Just 1K Of JavaScript Magic.html">This Dashcam Simulation Is Just 1K Of JavaScript Magic</a></li><li><a href="./A Beginner's Guide to Grunt: Redux.html">A Beginner's Guide to Grunt: Redux</a></li><li><a href="./An Overview of Functional Techniques (for non FPers) using JavaScript.html">An Overview of Functional Techniques (for non FPers) using JavaScript</a></li><li><a href="./A Faster Start with Backbone.js.html">A Faster Start with Backbone.js</a></li><li><a href="./Tracking Pageviews with Google Analytics and Angular.html">Tracking Pageviews with Google Analytics and Angular</a></li><li><a href="./Understanding JavaScript Generators.html">Understanding JavaScript Generators</a></li><li><a href="./Ten Talks from NodeConf One-Shot Budapest.html">Ten Talks from NodeConf One-Shot Budapest</a></li><li><a href="./Build Production Ready JavaScript Apps With Grunt.html">Build Production Ready JavaScript Apps With Grunt</a></li><li><a href="./Adopting AngularJS for Enterprise Software.html">Adopting AngularJS for Enterprise Software</a></li><li><a href="./The Road to Ember 2.0 with Tom Dale and Yehuda Katz.html">The Road to Ember 2.0 with Tom Dale and Yehuda Katz</a></li><li><a href="./Resources for JavaScript and DOM Compatibility Tables.html">Resources for JavaScript and DOM Compatibility Tables</a></li><li><a href="./Node.js Tools for Visual Studio 1.0 Release Candidate.html">Node.js Tools for Visual Studio 1.0 Release Candidate</a></li><li><a href="./Handsontable: JavaScript Excel-like Data Grid Editor.html">Handsontable: JavaScript Excel-like Data Grid Editor</a></li><li><a href="./SVG Morpheus: JS Library for Morphing Between SVG Icons.html">SVG Morpheus: JS Library for Morphing Between SVG Icons</a></li><li><a href="./Tubemaps: Browser and Node Library and Command-Line Tool for Handling (London) Tube Data.html">Tubemaps: Browser and Node Library and Command-Line Tool for Handling (London) Tube Data</a></li><li><a href="./SmartUnderline: Better Looking Underlines on the Web.html">SmartUnderline: Better Looking Underlines on the Web</a></li><li><a href="./QuaggaJS: An Advanced Barcode-Reader Written in JavaScript.html">QuaggaJS: An Advanced Barcode-Reader Written in JavaScript</a></li><li><a href="./Jss: Dynamic Stylesheets for Web Components.html">Jss: Dynamic Stylesheets for Web Components</a></li></ul></section></div>