<!doctype html><div style="max-width: 700px;font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif;padding: 50px;line-height: 1.25;background: #f9f9f9;"><meta charset="UTF8"/><title>React Tween State: The Equivalent of React's this.setState, but for Animated Tweening</title><h1>React Tween State: The Equivalent of React's this.setState, but for Animated Tweening</h1><p><a href="https://github.com/chenglou/react-tween-state?">Original Article</a> &middot; <a href="#articleList">Articles in this issue</a> </p><div><article class="markdown-body entry-content">

<p>The equivalent of React's <code>this.setState</code>, but for animated tweening: <code>this.tweenState</code>.</p>

<p><a href="https://rawgit.com/chenglou/react-tween-state/master/examples/index.html">Live demo</a> and <a href="https://github.com/chenglou/react-tween-state/tree/master/examples">source</a>.</p>

<div class="highlight highlight-sh"><pre>npm install react-tween-state
</pre></div>

<h2>
<a name="user-content-api" class="anchor" href="https://github.com/chenglou/react-tween-state#api"></a>API</h2>

<p>Example usage:</p>

<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">tweenState</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'react-tween-state'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">React</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'react'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">App</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createClass</span><span class="p">({</span>
  <span class="nx">mixins</span><span class="o">:</span> <span class="p">[</span><span class="nx">tweenState</span><span class="p">.</span><span class="nx">Mixin</span><span class="p">],</span>
  <span class="nx">getInitialState</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span><span class="nx">left</span><span class="o">:</span> <span class="mi">0</span><span class="p">};</span>
  <span class="p">},</span>
  <span class="nx">handleClick</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">tweenState</span><span class="p">(</span><span class="s1">'left'</span><span class="p">,</span> <span class="p">{</span>
      <span class="nx">easing</span><span class="o">:</span> <span class="nx">tweenState</span><span class="p">.</span><span class="nx">easingTypes</span><span class="p">.</span><span class="nx">easeInOutQuad</span><span class="p">,</span>
      <span class="nx">duration</span><span class="o">:</span> <span class="mi">500</span><span class="p">,</span>
      <span class="nx">endValue</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">left</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">?</span> <span class="mi">400</span> <span class="o">:</span> <span class="mi">0</span>
    <span class="p">});</span>
  <span class="p">},</span>
  <span class="nx">render</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">style</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">position</span><span class="o">:</span> <span class="s1">'absolute'</span><span class="p">,</span>
      <span class="nx">width</span><span class="o">:</span> <span class="mi">50</span><span class="p">,</span>
      <span class="nx">height</span><span class="o">:</span> <span class="mi">50</span><span class="p">,</span>
      <span class="nx">backgroundColor</span><span class="o">:</span> <span class="s1">'lightblue'</span><span class="p">,</span>
      <span class="nx">left</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">getTweeningValue</span><span class="p">(</span><span class="s1">'left'</span><span class="p">)</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">style</span><span class="p">}</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleClick</span><span class="p">}</span> <span class="o">/&gt;</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="user-content-general" class="anchor" href="https://github.com/chenglou/react-tween-state#general"></a>General</h3>

<h4>
<a name="user-content-thistweenstatestatenamestring-configurationobject" class="anchor" href="https://github.com/chenglou/react-tween-state#thistweenstatestatenamestring-configurationobject"></a><code>this.tweenState(stateNameString, configurationObject)</code>
</h4>

<p>This immediately calls <code>setState</code> on your state name under the hood, and also creates a virtual "layer", in which your state didn't jump straight to the final value: rather, it is being tweened. <code>this.getTweeningValue(stateNameString)</code> lets you access the tweening value on that layer. Formal API below.</p>

<p><code>stateNameString</code> is the name of the state you want to tween.</p>

<p><code>configurationObject</code> is an object of the following format:</p>

<div class="highlight highlight-js"><pre><span class="p">{</span>
  <span class="nx">easing</span><span class="o">:</span> <span class="nx">easingFunction</span><span class="p">,</span>
  <span class="nx">duration</span><span class="o">:</span> <span class="nx">timeInMilliseconds</span><span class="p">,</span>
  <span class="nx">beginValue</span><span class="o">:</span> <span class="nx">aNumber</span><span class="p">,</span>
  <span class="nx">endValue</span><span class="o">:</span> <span class="nx">aNumber</span><span class="p">,</span>
  <span class="nx">onEnd</span><span class="o">:</span> <span class="nx">endCallback</span><span class="p">,</span>
  <span class="nx">stackBehavior</span><span class="o">:</span> <span class="nx">behaviorOption</span>
<span class="p">}</span>
</pre></div>

<ul class="task-list">
<li>
<code>easing</code> (default: <code>tweenState.easingTypes.easeInOutQuad</code>): the interpolation function used. react-tween-state provides <a href="https://github.com/chenglou/react-tween-state/blob/master/easingTypes.js">frequently used interpolation</a> (all exposed inside <code>tweenState.easingTypes</code>). In case you ever create your own, the function signature is: <code>(currentTime: Number, beginValue: Number, endValue: Number, totalDuration: Number): Number</code>.</li>
<li>
<code>duration</code> (default: <code>300</code>).</li>
<li>
<code>beginValue</code> (default: the current value the state being tweened, <code>this.state[stateNameString]</code>).</li>
<li>
<code>endValue</code>.</li>
<li>
<code>onEnd</code>: the callback to trigger when the animation's done.</li>
<li>
<code>stackBehavior</code> (default: <code>tweenState.stackBehavior.ADDITIVE</code>). Subsequent tweening to the same state value will be stacked (added together). This gives a smooth tweening effect that is iOS 8's new default. <a href="http://ronnqvi.st/multiple-animations/">This blog post</a> describes it well. The other option is <code>tweenState.stackBehavior.DESTRUCTIVE</code>, which replaces all current animations of that state value by this new one.</li>
</ul><h4>
<a name="user-content-thisgettweeningvaluestatenamestring" class="anchor" href="https://github.com/chenglou/react-tween-state#thisgettweeningvaluestatenamestring"></a><code>this.getTweeningValue(stateNameString)</code>
</h4>

<p>After you call <code>this.tweenState(...)</code>, the state value is set just like after a normal <code>setState()</code>. To actually get the current, tweening value of that state, you'd use <code>this.getTweeningValue(stateNameString)</code> (typically used in <code>render</code>).</p>

<h3>
<a name="user-content-advanced" class="anchor" href="https://github.com/chenglou/react-tween-state#advanced"></a>Advanced</h3>

<h4>
<a name="user-content-thistweenstatestatereffunction-statenamestring-configurationobject" class="anchor" href="https://github.com/chenglou/react-tween-state#thistweenstatestatereffunction-statenamestring-configurationobject"></a><code>this.tweenState(stateRefFunction, stateNameString, configurationObject)</code>
</h4>

<p>Sometimes, you want to tween not <code>this.state.myValue</code>, but the value in <code>this.state.myObject.myArray[4]</code>, in which case passing only a string of the state name isn't enough. The second form of <code>tweenState()</code> accepts a function and expects you to return the state path of the value you tween, like this:</p>

<div class="highlight highlight-js"><pre><span class="nx">getInitialState</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">{</span>
    <span class="nx">rectangles</span><span class="o">:</span> <span class="p">[</span>
      <span class="p">{</span><span class="nx">x</span><span class="o">:</span> <span class="mi">10</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span> <span class="mi">20</span><span class="p">},</span>
      <span class="p">{</span><span class="nx">x</span><span class="o">:</span> <span class="mi">10</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span> <span class="mi">40</span><span class="p">}</span>
    <span class="p">]</span>
  <span class="p">};</span>
<span class="p">}</span>
<span class="c1">// ... tween this.state.rectangles[0].x</span>
<span class="k">this</span><span class="p">.</span><span class="nx">tweenState</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">state</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="nx">state</span><span class="p">.</span><span class="nx">rectangles</span><span class="p">[</span><span class="mi">0</span><span class="p">]},</span> <span class="s1">'x'</span><span class="p">,</span> <span class="nx">configurationObject</span><span class="p">);</span>
</pre></div>

<p><code>configurationObject</code> is the same.</p>

<h4>
<a name="user-content-thisgettweeningvaluestatereffunction-statenamestring" class="anchor" href="https://github.com/chenglou/react-tween-state#thisgettweeningvaluestatereffunction-statenamestring"></a><code>this.getTweeningValue(stateRefFunction, stateNameString)</code>
</h4>

<p>See above. Usage: <code>this.getTweeningValue(function(state) {return state.rectangles[0]}, 'x')</code>.</p>

<h2>
<a name="user-content-goal-of-this-library" class="anchor" href="https://github.com/chenglou/react-tween-state#goal-of-this-library"></a>Goal of this library</h2>

<p>React's powerful model allows us to build apps the functional way. Having a sensible API for animation is a less explored area. This library leverages React's concept of state and render to let you specify transitions declaratively. If everything goes alright, we can make React expose powerful hooks to make this even better.</p>

<p>Part of a few animation API experimentations.</p>

<h2>
<a name="user-content-license" class="anchor" href="https://github.com/chenglou/react-tween-state#license"></a>License</h2>

<p>BSD.</p></article>
  </div><hr/><section id="articleList" style="font-size: 14px;"><b>Articles in This Issue</b><ul><li><a href="./The State of JavaScript in 2015.html">The State of JavaScript in 2015</a></li><li><a href="./io.js: A Node and npm-compatible JavaScript Platform.html">io.js: A Node and npm-compatible JavaScript Platform</a></li><li><a href="./The DailyJS JavaScript Developer Survey 2014.html">The DailyJS JavaScript Developer Survey 2014</a></li><li><a href="./SVG In-Depth Online-In-Person Workshop.html">SVG In-Depth Online/In-Person Workshop</a></li><li><a href="./<img src="http:--s3.amazonaws.com-nlga-uploads-item-image-30504-i.png" style="border: 0px solid #bbbbbb" width="120" height="120" alt="Frontend Masters">.html"><img src="http://s3.amazonaws.com/nlga/uploads/item/image/30504/i.png" style="border: 0px solid #bbbbbb" width="120" height="120" alt="Frontend Masters"></a></li><li><a href="./Getting Started with JavaScript for Automation on OS X Yosemite.html">Getting Started with JavaScript for Automation on OS X Yosemite</a></li><li><a href="./Preparing for The Future of AngularJS.html">Preparing for The Future of AngularJS</a></li><li><a href="./Relieving Backbone Pain with Flux and React (video).html">Relieving Backbone Pain with Flux and React (video)</a></li><li><a href="./JavaScript developers - spend 60 seconds applying to 50 NYC jobs at once.html">JavaScript developers - spend 60 seconds applying to 50 NYC jobs at once</a></li><li><a href="./underdog.io..html">underdog.io.</a></li><li><a href="./Javascript Devs in High Demand! (SF, LA, NYC, ORD, BOS, LON).html">Javascript Devs in High Demand! (SF, LA, NYC, ORD, BOS, LON)</a></li><li><a href="./JS Remote Conf: An Online JavaScript Conference in February 2015.html">JS Remote Conf: An Online JavaScript Conference in February 2015</a></li><li><a href="./An Update on the Node.js Advisory Board.html">An Update on the Node.js Advisory Board</a></li><li><a href="./Demystifying JavaScript Variable Scope and Hoisting.html">Demystifying JavaScript Variable Scope and Hoisting</a></li><li><a href="./JavaScript Modules the ES6 Way.html">JavaScript Modules the ES6 Way</a></li><li><a href="./Top 10 Mistakes Node.js Developers Make.html">Top 10 Mistakes Node.js Developers Make</a></li><li><a href="./Level Up in Backbone.js, A Powerful JavaScript MVC Framework.html">Level Up in Backbone.js, A Powerful JavaScript MVC Framework</a></li><li><a href="./Creating Nice Alerts with sweetAlert.html">Creating Nice Alerts with sweetAlert</a></li><li><a href="./Use ngStorage For All Your AngularJS Local Storage Needs.html">Use ngStorage For All Your AngularJS Local Storage Needs</a></li><li><a href="./Calling an Array of Functions in JavaScript.html">Calling an Array of Functions in JavaScript</a></li><li><a href="./The Anatomy of A Simple Templating Engine.html">The Anatomy of A Simple Templating Engine</a></li><li><a href="./The Case For Marionette.js (a Backbone framework).html">The Case For Marionette.js (a Backbone framework)</a></li><li><a href="./PhotoSwipe: A Photo Gallery, with No Dependencies.html">PhotoSwipe: A Photo Gallery, with No Dependencies</a></li><li><a href="./MagicEye.js: JS Lib (+ demo) for Generating 3D Magic Eye Images.html">MagicEye.js: JS Lib (+ demo) for Generating 3D Magic Eye Images</a></li><li><a href="./Preceptor: Test Runner and Aggregator.html">Preceptor: Test Runner and Aggregator</a></li><li><a href="./React Tween State: The Equivalent of React's this.setState, but for Animated Tweening.html">React Tween State: The Equivalent of React's this.setState, but for Animated Tweening</a></li><li><a href="./Duktape: An Embeddable JavaScript Engine (ES 5.1 Compliant) Written in C.html">Duktape: An Embeddable JavaScript Engine (ES 5.1 Compliant) Written in C</a></li><li><a href="./MetricsGraphics.js: A Lightweight Graphics Library Based On D3.html">MetricsGraphics.js: A Lightweight Graphics Library Based On D3</a></li><li><a href="./Tweene: JavaScript Animation Proxy (Wraps-Abstracts Other Libs).html">Tweene: JavaScript Animation Proxy (Wraps/Abstracts Other Libs)</a></li><li><a href="./MustBe: Authorization Plumbing For Node.js - Express Apps.html">MustBe: Authorization Plumbing For Node.js / Express Apps</a></li></ul></section></div>